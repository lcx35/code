{% extends "base.html" %}

{% block content %}


<a href="javascript:void(0);" onclick="post('/testpost', {domain: '7mtt.com', action: 1, version: 1})">aa</a>

<li>{{ data }}</li>
<div id="result"></div>

<script>
function post(url, data){
    document.getElementById("result").innerHTML='<img src="/static/images/0.gif">';

    var ajax;
    if(window.XMLHttpRequest){ //Mozilla 浏览器
        ajax = new XMLHttpRequest();
         
        if (ajax.overrideMimeType)
            ajax.overrideMimeType("application/json");
    }
    else if (window.ActiveXObject){ // IE浏览器
        try{
            ajax = new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch (e){
            try{
                ajax = new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch (e) {}
        }
    }   
     
    if (!ajax) { 
        window.alert("不能创建XMLHttpRequest对象实例.");
        return false;
    }
 
    ajax.open("post", url, true);
    ajax.setRequestHeader("contentType","text/html;charset=uft-8") 
    ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
    var b = "";
    for (var x in data) {
	b = b+x+"="+data[x]+"&"
    }
    b = b.slice(0, -1) 
    ajax.send(b);
    ajax.onreadystatechange = function(){
        if (ajax.status == 200){
		 document.getElementById("result").innerHTML=ajax.responseText;
        }else{
		alert('error');
        }
    }
}

</script>

{% endblock %}
